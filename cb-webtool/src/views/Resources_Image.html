{{ template "Top" .}}

		<div id="lnb">
			
			<div class="bg"></div>
				
			<div class="m_box">
				
				{{template "Top_box" .}}
	
				{{template "LNB_popup" .}}
				
				<!-- menu -->
				<div class="leftmenu">
					
					<ul class="nav">
						<li class="nav-item"><a class="nav-link" data-toggle="tab" href="#Operation">Operation</a></li>
						<li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#Setting">Setting</a></li>
					</ul>
					
					<div class="tab-content">
						<div class="tab-pane fade" id="Operation">
							<ul class="menu">
								<li>
									<a href="javascript:void(0);">Dashboard</a>
									<ul>
										<li><a href="/Dashboard/NS">NS</a></li>
										<li><a href="/Dashboard/Global">Global</a></li>
									</ul>
								</li>
								<li>
									<a href="javascript:void(0);">Manage</a>
									<ul>
										<li><a href="/Manage/MCIS/list">MCIS</a></li>
										<li><a href="!#">MC-App</a></li>
									</ul>
								</li>
								<li>
									<a href="javascript:void(0);">Monitoring</a>
									<ul>
										<li><a href="/Monitoring/MCIS/list">MCIS</a></li>
										<li><a href="/operation/Monitoring_McApp.html">MC-App</a></li>
									</ul>
								</li>
								<li>
									<a href="javascript:void(0);">Policy</a>
									<ul>
										<li><a href="/assets/operation/Policy_Monitoring.html">Monitoring</a></li>
										<li><a href="/assets/operation/Policy_Threshold.html">Threshold</a></li>
										<li><a href="/assets/operation/Policy_Placement.html">Placement</a></li>
									</ul>
								</li>
								<li>
									<a href="javascript:void(0);">About</a>
									<ul>
										<li><a href="/assets/operation/About.html">About</a></li>
									</ul>
								</li>
							</ul>
						</div>
						
						<div class="tab-pane fade show active" id="Setting">
							<ul class="menu">
								<li class="active">
									<a href="javascript:void(0);">Resources</a>
									<ul>
										<li><a href="/Vpc/list">Network</a></li>
                                        <li><a href="/SecurityGroup/list">Security</a></li>
                                        <li><a href="/SSH/list">SSH key</a></li>
                                        <li class="on"><a href="/Image/list">(Server) Image</a></li>
                                        <li><a href="/Spec/list">(Server) Spec</a></li>
									</ul>
								</li>
								<li>
									<a href="javascript:void(0);">App Resource</a>
									<ul>
										<li><a href="!#">(Server) Image</a></li>
										<li><a href="!#">Pod</a></li>
									</ul>
								</li>
								<li>
									<a href="javascript:void(0);">Cloud Connections</a>
									<ul>
										<li><a href="/Cloud/Connection/list">Cloud Connections</a></li>
									</ul>
								</li>
								<li>
									<a href="javascript:void(0);">NameSpace</a>
									<ul>
										<li><a href="/NameSpace/NS/list">NameSpace</a></li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
					
				</div>
				<!-- //menu -->
				
			</div>
			
			<div class="bottom"></div>
			<a href="javascript:;" id="m_close"></a>
			
		</div>
		
	
		{{template "Header" .}}
	
        {{template "Modal" .}}
				
				<!-- contents -->
				<div class="contbox">
					
					<div class="titlebox">
						<div class="tit"><img src="/assets/img/common/icon_cont.png" alt=""/>Resources / <strong>(Server) Image</strong></div>
						<div class="location">Home  <span>></span>  Setting  <span>></span>  Resources  <span>></span>  <strong>(Server) Image</strong></div>
					</div>


					
					<!-- list -->
					<div class="dashboard dashboard_cont">
						
						<div class="d_box box_m box_w100">
							<div class="titbox">
								<div class="tit initial"><strong>Server Image</strong></div>
								<div class="top_info">
									<ul>
										<li>
											<a href="javascript:void(0);">Filter</a>
											<div class="infobox">
												<div class="box">
													<ul>
                                                        <li><a href="javascript:void(0);">Image ID</a></li>
														<li><a href="javascript:void(0);">Image Name</a></li>
													</ul>
												</div>
											</div>
										</li>
										<li>
											<a href="javascript:void(0);">Sort</a>
											<div class="infobox">
												<div class="box">
													<ul>
														<li><a href="javascript:void(0);" onclick="getImageList('cspImageId')">Image ID</a></li>
														<li><a href="javascript:void(0);" onclick="getImageList('name')">Image Name</a></li>
													</ul>
												</div>
											</div>
										</li>
										<li>
											<a href="javascript:void(0);">Action</a>
											<div class="infobox">
												<div class="box">
													<ul>
														<li><a href="javascript:void(0);" data-toggle="modal" data-target="#RegistBox">Add</a></li>
														<li><a href="javascript:void(0);" data-toggle="modal" data-target="#UnRegist">Delete</a></li>
													</ul>
												</div>
											</div>
										</li>
										<li><a href="javascript:void(0);"><img src="/assets/img/common/icon_question.png" alt=""/></a></li>
									</ul>
								</div>
							</div>
	
							<!-- popup Regist -->
							<div class="modal fade layerpopup" id="RegistBox" tabindex="-1" role="dialog" aria-hidden="true">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										
										<div class="modal-body">
											<div class="txt">Would you like to register Image <br />Resource ?</div>
											<div class="btnbox">
												<button type="button" class="btn_cancel" data-dismiss="modal">Cancel</button>
												<button type="button" class="btn_ok register" onclick="goFocus('reg_imageName')" data-dismiss="modal">OK</button>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							<!-- //popup Regist -->
	
							<!-- popup UnRegist -->
							<div class="modal fade layerpopup" id="UnRegist" tabindex="-1" role="dialog" aria-hidden="true">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										
										<div class="modal-body">
											<div class="txt">Would you like to un-register Image <br />Resource ?</div>
											<div class="btnbox">
												<button type="button" class="btn_cancel" data-dismiss="modal">Cancel</button>
												<button type="button" class="btn_ok" onclick="goDelete();" data-dismiss="modal">OK</button>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							<!-- //popup UnRegist -->
							
							<script>
								$(document).ready(function(){
									//action register open / table view close
									$('#RegistBox .btn_ok.register').click(function(){
										$(".dashboard.register_cont").toggleClass("active");
										$(".dashboard.server_status").removeClass("view");
										$(".dashboard .status_list tbody tr").removeClass("on");
										//ok 위치이동
										$('#RegistBox').on('hidden.bs.modal', function () {
											var offset = $("#CreateBox").offset();
											$("#wrap").animate({scrollTop : offset.top}, 300);
										})		
									});
								});
							</script>
							
							<div class="ds_cont">
								
								<div class="dataTable status_list">
									<table cellpadding="0" cellspacing="0" border="1" summary="">
                                        <colgroup>
                                            <col width="50px">
                                            <col width="">
                                            <col width="">
                                            <col width="">
                                            <col width="60px">
                                        </colgroup>
										<thead>
											<tr>
												<th><input type="checkbox" name="" value="" id="th_chall" title="" /><label for="th_chall"></label></td>
                                                <th>Image ID</th>
												<th>Image Name</th>
												<th>Description</th>
												<th></th>
											</tr>
										</thead>
										<tbody id="imgList">
											<!--
											<tr>
												<td class="overlay hidden" data-th=""><input type="checkbox" name="chk" value="" id="td_ch4" title="" /><label for="td_ch4"></label> <span class="ov off"></span></td>
												<td class="btn_mtd ovm" data-th="Image ID">gcp-image01 <span class="ov"></span></td>
												<td class="overlay hidden" data-th="Image Name">gcp-image-01</td>
												<td class="overlay hidden" data-th="CP">GCP</td>
												<td class="overlay hidden" data-th="region">ap-east-1</td>
												<td class="overlay hidden" data-th="guestOS">Other Linux</td>
												<td class="overlay hidden" data-th="description">images for gcp …</td>
												<td class="overlay hidden" data-th="status">-</td>
												<td class="overlay hidden" data-th="Create Date">2020-02-01</td>
												<td class="overlay hidden" data-th=""><a href="javascript:void(0);"><img src="/assets/img/contents/icon_link.png" class="icon" alt=""/></a></td>
                                            </tr>
                                            -->
										</tbody>
									</table>
								</div>
								
								<script>
									/* scroll */
									$(document).ready(function(){
										//checkbox all
								    $("#th_chall").click(function() {
								      if ($("#th_chall").prop("checked")) {
								        $("input[name=chk]").prop("checked", true);
								      } else {
								        $("input[name=chk]").prop("checked", false);
								      }
								    })
										
										//table 스크롤바 제한
										$(window).on("load resize",function(){
											var vpwidth = $(window).width();
										  if (vpwidth > 768 && vpwidth < 1800) {
										    $(".dashboard_cont .dataTable").addClass("scrollbar-inner");
										 		$(".dataTable.scrollbar-inner").scrollbar();
										  } else {
										    $(".dashboard_cont .dataTable").removeClass("scrollbar-inner");
										  }
										});
									});
								</script>
								
								<!-- 
								<div class="pageing">
									<a href="#" class="btn_prev"><span>이전</span></a>
									<a href="#" class="active">1</a>
									<a href="#">2</a>
									<a href="#">3</a>
									<a href="#">4</a>
									<a href="#">5</a>
									<a href="#" class="btn_next"><span>다음</span></a>
								</div>
								-->
							</div>
							
						</div>
						
					</div>
					<!-- //list -->
					
					
					<!-- Modify -->
					<div class="dashboard dashboard_cont server_status" id="info_box">
						
						<div class="d_box box_m box_w100">
							<div class="titbox_n">
								<div class="tit initial"><strong>Image Info</strong> [<span class="stxt"></span>]</div>
							</div>
							
							<div class="ds_cont">
								<div class="register_box">
									
									<div class="top_ipbox">
										<div class="ipbox ipbox1">
											<ul>
												<li class="reg_1">
													<label>Image Name</label>
													<span class="sbox">
														<input type="text" id="dtlImageName" name="dtlImageName" value="" placeholder="" class="gray" title="" readonly />
														<!--<a href="javascript:void(0);"><img src="/assets/img/contents/icon_copy.png" class="icon" alt=""/></a>-->
													</span>
												</li>
											</ul>
										</div>
										<div class="ipbox ipbox1">
											<ul>
												<li class="reg_1">
													<label>Cloud Provider</label>
													<input type="text" id="dtlProvider" name="dtlProvider" value="" placeholder="" class="gray" title="" readonly />
													<!--
													<select class="selectbox w1">
														<option value="1">Selected Provider</option>
													</select>
													<select class="selectbox w2">
														<option value="1">Selected Region</option>
													</select>
													-->
												</li>
												<li class="reg_1">
													<label>Connection Name</label>
													<input type="text" id="dtlConnectionName" name="dtlConnectionName" value="" placeholder="" class="gray" title="" readonly />
													<!--
													<select class="selectbox w3">
														<option value="1">Selected ConnectionName</option>
													</select>
													-->
												</li>
											</ul>
										</div>
									</div>
									
									<div class="graybox">
										
										<div class="g_box">
											<div class="g_ipbox g_ipbox1">
												<ul>
													<li>
														<label>Image Id</label>
														<span class="sbox">
															<input type="text" id="dtlImageId" name="" value="" placeholder="" class="gray" title="" readonly />
															<!--<a href="javascript:void(0);"><img src="/assets/img/contents/icon_copy.png" class="icon" alt=""/></a>-->
														</span>
													</li>
													<li>
														<label>guestOS</label>
														<input type="text" id="dtlGuestOS" name="dtlGuestOS" value="" placeholder="" class="gray" title="" readonly />
													</li>
												</ul>
											</div>
											
											<div class="g_ipbox g_ipbox1">
												<ul>
													<li>
														<label>Description</label>
														<textarea id="dtlDescription" name="dtlDescription" cols="" rows="" placeholder="" class="gray" title="" readonly ></textarea>
													</li>
												</ul>
											</div>
											<!--
											<div class="g_ipbox g_ipbox1 g_ipbox3">
												<ul>
													<li>
														<label>guestOS</label>
														<input type="text" name="" value="" placeholder="guestOS" class="gray" title="" readonly />
													</li>
													<li>
														<label>status</label>
														<input type="text" name="" value="" placeholder="status" class="gray" title="" readonly />
													</li>
												</ul>
											</div>
											-->
											<!--
											<div class="g_ipbox g_ipbox2 g_ipbox4">
												<ul>
													<li>
														<label>creationDate</label>
														<input type="text" name="" value="" placeholder="vNetId" class="gray" title="" readonly />
													</li>
													<li>
														<label>keyvalues</label>
														<textarea  cols="" rows="" placeholder="display Json Context" class="gray" title="" readonly ></textarea>
														<span class="reg_stxt right_a"><a href="#">Import JSON</a></span>
													</li>
												</ul>
												<span class="b_txt">Help ) Provider 별 Custom 필수 항목 값이 정의 될 수도 있음.</span>
											</div>
											-->
										</div>
										
									</div>
									
									<div class="top_ipbox bottom_ipbox padd_Box_1">
										<div class="ipbox ipbox1 ipbox5">
											<ul>
												<li class="reg_1">
													<label>CSP Image Name</label>
													<input type="text" id="dtlCspImageName" name="dtlCspImageName" value="" placeholder="" class="gray" title="" readonly />
												</li>
											</ul>
										</div>
										<div class="ipbox ipbox2 ipbox6">
											<ul>
												<li class="reg_2">
													<label>CSP Image ID</label>
													<input type="text" id="dtlCspImageId" name="dtlCspImageId" value="" placeholder="" class="gray" title="" readonly />
												</li>
											</ul>
										</div>
									</div>
									
									
									<div class="btnbox">
										<div class="btn_center">
											<button name="" value="" class="btn_co btn_cr_b w135 btn_cancel">Cancel</button> 
											<button name="" value="" class="btn_co btn_cr_g w135 btn_modify">Modify</button> 
										</div>
									</div>
								
								</div>
							</div>
							
						</div>
						
					</div>
					<!-- //Modify -->
					
					
					<!-- Register Image -->
					<div class="dashboard dashboard_cont register_cont" id="CreateBox">
						
						<div class="d_box box_m box_w100">
							<div class="titbox_n">
								<div class="tit initial cg"><strong>Register Server Image</strong></div>
							</div>
							
							<div class="ds_cont">
								<div class="register_box">
									
									<div class="top_ipbox">
										<div class="ipbox ipbox1">
											<ul>
												<li class="reg_2">
													<label><span class="ch">*</span>Image Name</label>
													<input type="text" id="reg_imageName" name="reg_imageName" value="" placeholder="Input Image Name" class="pline" title="" />
                                                </li>
                                                <li class="reg_2">
													<label><span class="ch">*</span>CSP Image ID</label>
													<input type="text" id="reg_cspImgId" name="reg_cspImgId" value="" placeholder="Input CSP Image Id" class="pline ip_w1" title="" />
                                                </li>
                                                <li class="reg_2">
                                                    <label>CSP Image Name</label>
                                                    <span class="sbox">
                                                        <input type="text" id="reg_cspImgName" name="reg_cspImgName" value="" placeholder="Input CSP Image Name" class="pline" title="" />
                                                    </span>
                                                </li>
                                                <li class="reg_2">
                                                    <label><span class="ch">*</span>guestOS</label>
                                                    <input type="text" id="reg_guestOS" name="reg_guestOS" value="" placeholder="Input GuestOS" class="pline" title="" />
                                                </li>
											</ul>
										</div>
										<div class="ipbox ipbox2">
											<ul>
												<li class="reg_1">
													<label>Cloud Provider</label>
													<select class="selectbox white pline w3" name="ProviderName" id="provider" onchange="getConnectionInfo(this.value)">
														<option selected>Select Cloud Provider</option>
														<option value="AWS">AWS</option>
														<option value="AZURE">AZURE</option>
														<option value="Alibaba">Alibaba</option>
														<option value="GCP">GCP</option>
														<option value="Cloudit">Cloudit</option>
														<option value="Openstack">Openstack</option>
                                                    </select> 
                                                    <!--
													<select class="selectbox white pline w2">
														<option value="1">Selected Region</option>
                                                    </select>
                                                    -->
												</li>
												<li class="reg_1">
													<label><span class="ch">*</span>Connection Name</label>
													<select class="selectbox white pline w3"  name="reg_connectionName" id="reg_connectionName">
														<option selected>Selected ConnectionName</option>
													</select>
                                                </li>
                                                <li>
														<label>Description</label>
														<textarea  id="reg_description" name="reg_description" cols="" rows="" placeholder="Description" class="pline" title=""></textarea>
												</li>
                                                <!--
												<li class="reg_2">
													<label><span class="ch">*</span>CSP Image ID</label>
													<input type="text" id="reg_cspImgId" name="reg_cspImgId" value="" placeholder="Input CSP Image Id" class="pline ip_w1" title="" />
                                                </li>
                                                -->
											</ul>
										</div>
									</div>
									
                                    <!-- hidden input box -->
                                    <!--
									<div class="graybox ipbox_hidden">
										
										<div class="g_box">
											<div class="g_ipbox g_ipbox1">
												<ul>
													<li>
														<label>CSP Image ID</label>
														<span class="sbox">
															<input type="text" id="reg_cspImgName" name="reg_cspImgName" value="" placeholder="Input CSP Image Name" class="pline" title="" />
															<a href="javascript:void(0);"><img src="/assets/img/contents/icon_copy.png" class="icon" alt=""/></a>
														</span>
                                                    </li>
                                                    <li>
														<label><span class="ch">*</span>guestOS</label>
														<input type="text" id="reg_guestOS" name="reg_guestOS" value="" placeholder="Input GuestOS" class="pline" title="" />
                                                    </li>
												</ul>
											</div>
											
											<div class="g_ipbox g_ipbox2">
												<ul>
													<li>
														<label>Description</label>
														<textarea  id="reg_description" name="reg_description" cols="" rows="" placeholder="Description" class="pline" title=""></textarea>
													</li>
												</ul>
                                            </div>
                                            
											<div class="g_ipbox g_ipbox1 g_ipbox3">
												<ul>
													<li>
														<label><span class="ch">*</span>guestOS</label>
														<input type="text" id="reg_guestOS" name="reg_guestOS" value="" placeholder="Input GuestOS" class="pline" title="" />
                                                    </li>
                                                    <li>
														<label>status</label>
														<select class="selectbox white pline sel_w1">
															<option value="1">Selected status</option>
														</select>
                                                    </li>
												</ul>
                                            </div>
                                            
											<div class="g_ipbox g_ipbox2 g_ipbox4">
												<ul>
													<li>
														<label>creationDate</label>
														<input type="text" name="" value="" placeholder="vNetId" class="pline" title="" />
													</li>
													<li>
														<label>keyvalues</label>
														<textarea  cols="" rows="" placeholder="display Json Context" class="pline" title=""></textarea>
														<span class="reg_stxt right_a"><a href="#">Import JSON</a></span>
													</li>
												</ul>
												<span class="b_txt">Help ) Provider 별 Custom 필수 항목 값이 정의 될 수도 있음.</span>
                                            </div>
                                            
										</div>
										
                                    </div>
                                    -->
                                    <!-- //hidden input box -->
                                    <!--
									<div class="btn_arr">
										<div class="icon"></div>
									</div>
									-->
									<div class="btnbox">
										<div class="btn_center">
											<button name="" value="" class="btn_co btn_cr_b w135 btn_cancel">Cancel</button> 
											<button name="" value="" class="btn_co btn_cr_g w135 btn_ok" onclick="createImage()">Ok</button> 
										</div>
									</div>
								
								</div>
							</div>
							
						</div>
						
						<script>
                            $(document).ready(function () {
                                order_type = "name"
                                getImageList(order_type);
                            });

                            function fnMove(target) {
                                var offset = $("#" + target).offset();
                                console.log("fn move offset : ", offset)
                                $('html, body').animate({
                                    scrollTop: offset.top
                                }, 400);
                            }

                            function goFocus(target) {
                                console.log(event)
                                event.preventDefault()

                                $("#" + target).focus();
                                fnMove(target)
                            }      

                            function goDelete() {
                                var imageId = "";
								var count = 0;

								$( "input[name='chk']:checked" ).each (function (){
									count++;
									imageId = imageId + $(this).val()+"," ;
								});
								imageId = imageId.substring(0,imageId.lastIndexOf( ","));
								
								console.log("imageId : ", imageId);
								console.log("count : ", count);

								if(imageId == ''){
									alert("삭제할 대상을 선택하세요.");
									return false;
								}

								if(count != 1){
									alert("삭제할 대상을 하나만 선택하세요.");
									return false;
								}

								var url = CommonURL + "/ns/" + NAMESPACE + "/resources/image/" + imageId;
                                //var u = SpiderURL + "/vmimage/" + imageId;

								axios.delete(url, {
									headers: {
										'Authorization': "{{ .apiInfo}}",
                                        'Content-Type': "application/json"
									}
								}).then(result => {
									var data = result.data
									if (result.status == 200 || result.status == 201) {
										alert("Success Delete Image.");
										location.reload(true);
									}
								})
                            }                                                  

                            function getImageList(sort_type) {
                                console.log(sort_type);
                                var url = CommonURL + "/ns/" + NAMESPACE + "/resources/image";
                                axios.get(url, {
                                    headers: {
                                        'Authorization': "{{ .apiInfo}}",
                                        'Content-Type': "application/json"
                                    }
                                }).then(result => {
                                    console.log("get Image List : ", result.data);
                                    
                                    var data = result.data.image;
                                    var html = ""
                                    
                                    if (data.length) {
                                        if (sort_type) {
                                            console.log("check : ", sort_type);
                                            data.filter(list => list.name !== "").sort((a, b) => (a[sort_type] < b[sort_type] ? - 1 : a[sort_type] > b[sort_type] ? 1 : 0)).map((item, index) => (
                                                html += '<tr onclick="showInfo(\'' + item.name + '\');">' 
                                                    + '<td class="overlay hidden" data-th="">' 
                                                    + '<input type="hidden" id="img_info_' + index + '" value="' + item.name + '|' + item.cspImageId + '"/>' 
                                                    + '<input type="checkbox" name="chk" value="' + item.name + '" id="raw_'  + index + '" title="" /><label for="td_ch1"></label> <span class="ov off"></span></td>' 
                                                    + '<td class="btn_mtd ovm" data-th="cspImageId ">' + item.cspImageId  + '<span class="ov"></span></td>'
                                                    + '<td class="overlay hidden" data-th="name">' + item.name + '</td>' 
                                                    + '<td class="overlay hidden" data-th="description">' + item.description + '</td>'  
                                                    + '<td class="overlay hidden" data-th=""><a href="javascript:void(0);"><img src="/assets/img/contents/icon_link.png" class="icon" alt=""/></a></td>' 
                                                    + '</tr>'
                                            ))
                                        } else {
                                            data.filter((list) => list.name !== "").map((item, index) => (
                                                html += '<tr onclick="showInfo(\'' + item.name + '\');">' 
                                                    + '<td class="overlay hidden" data-th="">' 
                                                    + '<input type="hidden" id="img_info_' + index + '" value="' + item.name  + '"/>'
                                                    + '<input type="checkbox" name="chk" value="' + item.name + '" id="raw_' + index + '" title="" /><label for="td_ch1"></label> <span class="ov off"></span></td>' 
                                                    + '<td class="btn_mtd ovm" data-th="cspImageId">' + item.cspImageId + '<span class="ov"></span></td>' 
                                                    + '<td class="overlay hidden" data-th="name">' + item.name + '</td>' 
                                                    + '<td class="overlay hidden" data-th="description">' + item.description + '</td>' 
                                                    + '<td class="overlay hidden" data-th=""><a href="javascript:void(0);"><img src="/assets/img/contents/icon_link.png" class="icon" alt=""/></a></td>' 
                                                    + '</tr>'
                                            ))
                                        }
                                    
                                        $("#imgList").empty()
                                        $("#imgList").append(html)
                                        
                                        ModalDetail()
                                    }
                                })
                            }
                            
                            function ModalDetail() {
                                $(".dashboard .status_list tbody tr").each(function () {
                                    var $td_list = $(this),
                                        $status = $(".server_status"),
                                        $detail = $(".server_info");
                                    $td_list.off("click").click(function () {
                                        $td_list.addClass("on");
                                        $td_list.siblings().removeClass("on");
                                        $status.addClass("view");
                                        $status.siblings().removeClass("on");
                                        $(".dashboard.register_cont").removeClass("active");
                                        $td_list.off("click").click(function () {
                                            if ($(this).hasClass("on")) {
                                                console.log("reg ok button click")
                                                $td_list.removeClass("on");
                                                $status.removeClass("view");
                                                $detail.removeClass("active");
                                            } else {
                                                $td_list.addClass("on");
                                                $td_list.siblings().removeClass("on");
                                                $status.addClass("view");

                                                $status.siblings().removeClass("view");
                                                $(".dashboard.register_cont").removeClass("active");
                                            }
                                        });
                                    });
                                });
                            }
							
                            function getConnectionInfo(provider){
                                var url = SpiderURL+"/connectionconfig";
                                console.log("provider : ",provider)
                                //var provider = $("#provider option:selected").val();
                                var html = "";
                                var apiInfo = ApiInfo
                                axios.get(url,{
                                    headers:{
                                        'Authorization': apiInfo
                                    }
                                }).then(result=>{
                                    console.log('getConnectionConfig result: ',result)
                                    var data = result.data.connectionconfig
                                    console.log("connection data : ",data);
                                    var count = 0; 
                                    var configName = "";
                                    var confArr = new Array();
                                    for(var i in data){
                                        if(provider == data[i].ProviderName){ 
                                            count++;
                                            html += '<option value="'+data[i].ConfigName+'" item="'+data[i].ProviderName+'">'+data[i].ConfigName+'</option>';
                                            configName = data[i].ConfigName
                                            confArr.push(data[i].ConfigName)
                                            
                                        }
                                    }
                                    if(count == 0){
                                        alert("해당 Provider에 등록된 Connection 정보가 없습니다.")
                                            html +='<option selected>Select Configname</option>';
                                    }
                                    if(confArr.length > 1){
                                        configName = confArr[0];
                                    }
                                    $("#reg_connectionName").empty();
                                    $("#reg_connectionName").append(html);

                                })
                            }

                            function createImage() {
                                var imgId = $("#reg_imageName").val();
                                var imgName = $("#reg_imageName").val();
                                var cspImgId = $("#reg_cspImgId").val();
                                var guestOS = $("#reg_guestOS").val();
                                var connectionName = $("#reg_connectionName").val();
                                var description = $("#reg_description").val();
                                
								var cspImgName = "";
								if(!cspImgName) {
									$("#reg_cspImgName").val();
								}
								
                                console.log("check obj : " + imgId + ", " + imgName + ", " + cspImgId + ", " + cspImgName + ", " + guestOS + ", " + connectionName + ", " + description);
                                
                                if (!imgName) {
                                    alert("Input New Image Name")
                                    $("#reg_imageName").focus()
                                    return;
                                }

                                var apiInfo = "{{ .apiInfo}}";
                                var url = CommonURL+"/ns/"+NAMESPACE+"/resources/image?action=registerWithInfo"
                                console.log("Image Reg URL : ",url)
                                var obj = {
                                    connectionName: connectionName,
                                    cspImageId: cspImgId,
                                    cspImageName: cspImgName,
                                    description: description,
                                    guestOS: guestOS,
                                    id: imgId,
                                    name: imgName
                                }
                                console.log("info image obj Data : ", obj);
                                
                                if (imgName) {
                                    axios.post(url, obj, {
                                        headers: {
                                            'Content-type': 'application/json',
                                            'Authorization': apiInfo,
                                        }
                                    }).then(result => {
                                        console.log("result image : ", result);
                                        if (result.status == 200 || result.status == 201) {
                                            alert("Success Create Image!!")
                                            //등록하고 나서 화면을 그냥 고칠 것인가?
                                            getImageList();
                                            //아니면 화면을 리로딩 시킬것인가?
                                            location.reload();
                                            // $("#btn_add2").click()
                                            // $("#namespace").val('')
                                            // $("#nsDesc").val('')
                                        } else {
                                            alert("Fail Create Image)")
                                        }
                                    });
                                } else {
                                    alert("Input Image Name")
                                    $("#reg_imageName").focus()
                                    return;
                                }
                            }

							function showInfo(target) {
								console.log("target showInfo : ", target);
								var apiInfo = "{{ .apiInfo}}";
								var imageId = encodeURIComponent(target);
								$('.stxt').html(target);
								
								var url = CommonURL+"/ns/"+NAMESPACE+"/resources/image/"+ imageId;
								console.log("image detail URL : ",url)

								return axios.get(url,{
									headers:{
										'Authorization': apiInfo
									}
								
								}).then(result=>{
									var data = result.data
									console.log("Show Data : ",data);

									var dtlImageName = data.name;
									var dtlConnectionName = data.connectionName;
									var dtlImageId = data.id;
									var dtlGuestOS = data.guestOS;
									var dtlDescription = data.description;
									var dtlCspImageName = data.cspImageName;
									var dtlCspImageId = data.cspImageId;

									$("#dtlImageName").empty();
									$("#dtlProvider").empty();
									$("#dtlConnectionName").empty();
									$("#dtlImageId").empty();
									$("#dtlGuestOS").empty();
									$("#dtlDescription").empty();
									$("#dtlCspImageName").empty();
									$("#dtlCspImageId").empty();

									$("#dtlImageName").val(dtlImageName);
									$("#dtlConnectionName").val(dtlConnectionName);
									$("#dtlImageId").val(dtlImageId);
									$("#dtlGuestOS").val(dtlGuestOS);
									$("#dtlDescription").val(dtlDescription);
									$("#dtlCspImageName").val(dtlCspImageName);
									$("#dtlCspImageId").val(dtlCspImageId);

									getProvider(dtlConnectionName);
								}) 
							}

							function getProvider(target) {
								console.log("getProvidergetProvider : ",target);
								var url = SpiderURL+"/connectionconfig/" + target;
									
								return axios.get(url,{
									headers:{
										'Authorization': apiInfo
									}
								
								}).then(result=>{
									var data = result.data;
									
									var Provider = data.ProviderName;

									$("#dtlProvider").val(Provider);
								})        
							}

							$(document).ready(function() {
								//hidden input box
								$('.btn_arr').click(function(){
									$(this).toggleClass("up");
							    if ($(".graybox.ipbox_hidden").css("display") == "none") {
								    $(".graybox.ipbox_hidden").show();
								  } else {
								    $(".graybox.ipbox_hidden").hide();
								  }
								});	
							});
						</script>
						
					</div>
					<!-- //Register Image -->

				</div>
				<!-- //contents -->

{{template "Footer" .}}
